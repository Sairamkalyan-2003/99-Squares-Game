<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>99 Tiles Guessing Game</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 10px;
  text-align: center;
  background:
    linear-gradient(135deg, #7a4a28 25%, #8b5a2b 25%, #8b5a2b 50%, #7a4a28 50%, #7a4a28 75%, #8b5a2b 75%);
  background-size: 40px 40px;
}

h2 {
  color: #fff;
  text-shadow: 1px 1px 3px #000;
}

input, button {
  padding: 8px;
  font-size: 16px;
  margin: 5px;
  border-radius: 6px;
  border: none;
}

button {
  cursor: pointer;
}

.status {
  color: #fff;
  font-weight: bold;
  margin-top: 10px;
}

/* BOARD */
.board {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 6px;
  max-width: 95vw;
  margin: 15px auto;
}

.cell {
  background: radial-gradient(circle at top left, #deb887, #a36a3f);
  border-radius: 10px;
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
  position: relative;
  box-shadow: inset 0 0 4px #000;
  transition: transform 0.3s;
}

.cell:hover {
  transform: scale(1.05);
}

.cell.opened {
  background: #eee;
  cursor: default;
  animation: flip 0.4s ease;
}

@keyframes flip {
  from { transform: rotateY(90deg); }
  to { transform: rotateY(0deg); }
}

.number {
  position: absolute;
  font-size: 14px;
}

.circle {
  width: 65%;
  height: 65%;
  border-radius: 50%;
  display: none;
}

.cell.opened .circle {
  display: block;
}

/* MENUS */
.menu-section {
  display: none;
  margin: 20px auto;
  max-width: 600px;
  text-align: left;
}

.menu {
  background: #fff;
  border-radius: 8px;
  margin-bottom: 10px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

.menu-header {
  padding: 12px;
  background: #3e2723;
  color: #fff;
  cursor: pointer;
  font-size: 18px;
}

.menu-content {
  padding: 12px;
  display: none;
  animation: slide 0.3s ease;
}

@keyframes slide {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<h2>üé≤ 99 Tiles Guessing Game</h2>

<input type="password" id="win" placeholder="üîê Host Winning Number">
<button onclick="start()">‚ñ∂ Start Game</button>

<div class="status" id="status"></div>
<div class="board" id="board"></div>

<!-- MENUS -->
<div class="menu-section" id="menus">

  <div class="menu">
    <div class="menu-header" onclick="toggle(this)">üéÆ Gameplay</div>
    <div class="menu-content">
      <ol>
        <li>3‚Äì10 players can play.</li>
        <li>Number guessing game.</li>
        <li>Host selects winning number.</li>
        <li>Correct guess wins.</li>
        <li>99 tiles hide 5 colours.</li>
        <li>One tile per turn.</li>
        <li>Third same colour unlocks question.</li>
        <li>Guess fast to win.</li>
        <li>40 tiles opened ‚Üí Host wins.</li>
      </ol>
    </div>
  </div>

  <div class="menu">
    <div class="menu-header" onclick="toggle(this)">‚ùì Rules to Ask Questions</div>
    <div class="menu-content">
      <ol>
        <li>Only after 3 same colours open.</li>
        <li>Third opener asks and guesses again.</li>
        <li>Only Yes / No questions.</li>
        <li>Host replies only Yes or No.</li>
        <li>No Even/Odd questions.</li>
      </ol>
    </div>
  </div>

</div>

<!-- SOUNDS -->
<audio id="openSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="questionSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="loseSound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>

<script>
const MAX_TRIES = 40;
let winNumber, boardData = {}, opened = new Set();
let colorCount = {}, tries = 0, questionUsed = false;

function start() {
  winNumber = parseInt(document.getElementById("win").value);
  if (!winNumber || winNumber < 1 || winNumber > 99) {
    alert("Enter a number between 1‚Äì99");
    return;
  }

  setupBoard();
  drawBoard();
  tries = 0;
  opened.clear();
  colorCount = {};
  questionUsed = false;

  document.getElementById("menus").style.display = "block";
  setStatus("üü¢ Game Started");
}

function setupBoard() {
  let colors = [];
  ["Red","Pink","Yellow","Blue"].forEach(c => {
    for (let i = 0; i < 20; i++) colors.push(c);
  });
  for (let i = 0; i < 19; i++) colors.push("Black");

  shuffle(colors);
  let idx = 0;

  for (let i = 1; i <= 99; i++) {
    boardData[i] = (i === winNumber) ? "Green" : colors[idx++];
  }
}

function drawBoard() {
  const board = document.getElementById("board");
  board.innerHTML = "";

  for (let i = 1; i <= 100; i++) {
    const cell = document.createElement("div");

    if (i === 100) {
      cell.style.visibility = "hidden";
      board.appendChild(cell);
      continue;
    }

    cell.className = "cell";

    const num = document.createElement("div");
    num.className = "number";
    num.innerText = i;

    const circle = document.createElement("div");
    circle.className = "circle";
    circle.style.background = boardData[i];

    cell.appendChild(circle);
    cell.appendChild(num);
    cell.onclick = () => openTile(i, cell);

    board.appendChild(cell);
  }
}

function openTile(n, cell) {
  if (opened.has(n) || tries >= MAX_TRIES) return;

  document.getElementById("openSound").play();
  opened.add(n);
  tries++;
  cell.classList.add("opened");

  let color = boardData[n];
  colorCount[color] = (colorCount[color] || 0) + 1;

  if (n === winNumber) {
    document.getElementById("winSound").play();
    setStatus("üéâ PLAYER WINS! GREEN FOUND!");
    endGame();
    return;
  }

  if (colorCount[color] === 3 && !questionUsed && color !== "Green") {
    questionUsed = true;
    document.getElementById("questionSound").play();
    setTimeout(() => {
      const q = prompt("Ask a Yes/No question (no numbers)");
      if (/\d/.test(q)) alert("‚ùå Numbers not allowed");
      else alert("Host answers: Yes or No");
    }, 200);
  }

  if (tries >= MAX_TRIES) {
    document.getElementById("loseSound").play();
    setStatus("üèÜ HOST WINS! 40 tiles opened.");
    endGame();
    return;
  }

  setStatus(`Tiles Opened: ${tries} / ${MAX_TRIES}`);
}

function endGame() {
  document.querySelectorAll(".cell").forEach(c => c.onclick = null);
}

function setStatus(t) {
  document.getElementById("status").innerText = t;
}

function toggle(header) {
  const content = header.nextElementSibling;
  content.style.display = content.style.display === "block" ? "none" : "block";
}

function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
}
</script>

</body>
</html>
