<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>99 Squares Guessing Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 { margin-bottom: 5px; }
    .rules {
      max-width: 700px;
      margin: 0 auto 20px;
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      text-align: left;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 6px;
      max-width: 500px;
      margin: 20px auto;
    }
    .cell {
      background: #c8a165;
      border-radius: 6px;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: bold;
      position: relative;
      user-select: none;
    }
    .cell.opened {
      background: #eee;
      cursor: default;
    }
    .circle {
      width: 60%;
      height: 60%;
      border-radius: 50%;
      display: none;
    }
    .cell.opened .circle { display: block; }.status {
  margin-top: 15px;
  font-weight: bold;
}

.hidden { display: none; }

button {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  background: #333;
  color: #fff;
  cursor: pointer;
}

input {
  padding: 6px;
  width: 80px;
  text-align: center;
}

  </style>
</head>
<body><h1>ðŸŽ² 99 Squares Guessing Game</h1>
<p>Open caps, reveal colors, and find the <b>Green winning square</b> in 20 tries!</p><div class="rules">
  <h3>Rules</h3>
  <ol>
    <li>If 20 squares are opened, the game is over.</li>
    <li>If 3 squares of the same color are opened, you may ask <b>one</b> indirect Yes/No question.</li>
    <li>The question must be Yes/No and must <b>not contain numbers</b>.</li>
  </ol>
</div><div>
  <label><b>Host: Enter Winning Number (1â€“99): </b></label>
  <input type="password" id="winningInput" />
  <button onclick="startGame()">Start Game</button>
</div><div class="status" id="status"></div><div class="board" id="board"></div><script>
  const MAX_TRIES = 20;
  const boardEl = document.getElementById('board');
  const statusEl = document.getElementById('status');

  let board = {};
  let opened = new Set();
  let colorCount = {};
  let tries = 0;
  let questionUsed = false;
  let winningNumber = null;

  function startGame() {
    const input = document.getElementById('winningInput').value;
    winningNumber = parseInt(input);

    if (!winningNumber || winningNumber < 1 || winningNumber > 99) {
      alert('Enter a valid winning number between 1 and 99');
      return;
    }

    setupBoard();
    renderBoard();
    statusEl.textContent = `Game started! Tries left: ${MAX_TRIES}`;
  }

  function setupBoard() {
    board = {};
    opened.clear();
    colorCount = {};
    tries = 0;
    questionUsed = false;
    boardEl.innerHTML = '';

    let colors = [];
    ['Red', 'Pink', 'Yellow', 'Blue'].forEach(c => {
      for (let i = 0; i < 20; i++) colors.push(c);
    });
    for (let i = 0; i < 19; i++) colors.push('Black');

    shuffle(colors);

    let idx = 0;
    for (let i = 1; i <= 99; i++) {
      if (i === winningNumber) board[i] = 'Green';
      else board[i] = colors[idx++];
    }
  }

  function renderBoard() {
    for (let i = 1; i <= 100; i++) {
      const cell = document.createElement('div');
      if (i === 100) {
        cell.style.visibility = 'hidden';
        boardEl.appendChild(cell);
        continue;
      }

      cell.className = 'cell';
      cell.textContent = i;

      const circle = document.createElement('div');
      circle.className = 'circle';
      circle.style.background = board[i];
      cell.appendChild(circle);

      cell.onclick = () => openCell(i, cell);
      boardEl.appendChild(cell);
    }
  }

  function openCell(num, cell) {
    if (opened.has(num) || tries >= MAX_TRIES) return;

    opened.add(num);
    tries++;
    cell.classList.add('opened');
    cell.textContent = '';

    const color = board[num];
    colorCount[color] = (colorCount[color] || 0) + 1;

    if (num === winningNumber) {
      statusEl.textContent = 'ðŸŽ‰ You found the GREEN square! You win!';
      disableBoard();
      return;
    }

    if (color !== 'Green' && colorCount[color] === 3 && !questionUsed) {
      setTimeout(() => askQuestion(), 200);
    }

    if (tries >= MAX_TRIES) {
      statusEl.textContent = `ðŸ’€ Game Over! Winning number was ${winningNumber}`;
      disableBoard();
      return;
    }

    statusEl.textContent = `Opened ${tries} / ${MAX_TRIES} squares`;
  }

  function askQuestion() {
    const q = prompt('You opened 3 same colors! Ask ONE Yes/No question (no numbers):');
    if (!q) return;

    if (/\d/.test(q)) {
      alert('Invalid question. Numbers are not allowed.');
      return;
    }

    questionUsed = true;
    alert('Host answers: YES or NO (decided by host)');
  }

  function disableBoard() {
    document.querySelectorAll('.cell').forEach(c => c.onclick = null);
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
</script></body>
</html>
